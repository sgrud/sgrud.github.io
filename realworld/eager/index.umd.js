!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@babel/runtime/helpers/createClass"),require("@babel/runtime/helpers/inheritsLoose"),require("@babel/runtime/helpers/wrapNativeSuper"),require("tslib"),require("@sgrud/shell/jsx-runtime"),require("@sgrud/core"),require("@sgrud/shell"),require("@sgrud/state"),require("rxjs"),require("sgrud-realworld-core"),require("marked"),require("@babel/runtime/helpers/extends")):"function"==typeof define&&define.amd?define(["exports","@babel/runtime/helpers/createClass","@babel/runtime/helpers/inheritsLoose","@babel/runtime/helpers/wrapNativeSuper","tslib","@sgrud/shell/jsx-runtime","@sgrud/core","@sgrud/shell","@sgrud/state","rxjs","sgrud-realworld-core","marked","@babel/runtime/helpers/extends"],t):t(((e||self).sgrud=e.sgrud||{},e.sgrud.realworld=e.sgrud.realworld||{},e.sgrud.realworld.eager={}),e.babel.runtime.helpers.createClass,e.babel.runtime.helpers.inheritsLoose,e.babel.runtime.helpers.wrapNativeSuper,e.globalThis,e.sgrud.shell.jsx.runtime,e.sgrud.core,e.sgrud.shell,e.sgrud.state,e.rxjs,e.sgrud.realworld.core,e.marked,e.babel.runtime.helpers.extends)}(this,function(e,t,r,n,i,s,o,a,l,c,d,u,m){function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p,f=/*#__PURE__*/h(t),v=/*#__PURE__*/h(r),x=/*#__PURE__*/h(n),g=/*#__PURE__*/h(m);function j(e){var t=e.children,r=e.comment,n=r.createdAt,i=e.comment.author,o=i.image,a=i.username,l="/profile/"+a;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-block",children:s.jsx("p",{className:"card-text",children:r.body})}),s.jsxs("div",{className:"card-footer",children:[s.jsx("a",{className:"comment-author",href:l,is:"router-link",children:s.jsx("img",{className:"comment-author-img",src:o})})," ",s.jsx("a",{className:"comment-author",href:l,is:"router-link",children:a}),s.jsx("span",{className:"date-posted",children:new Date(n).toLocaleString()}),t]})]})})}function N(e){var t=e.children,r=e.article.author,n=r.image,i=r.username,o=new Date(e.article.createdAt).toLocaleString(),a="/profile/"+i;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"article-meta",children:[s.jsx("a",{href:a,is:"router-link",children:s.jsx("img",{src:n})}),s.jsxs("div",{className:"info",children:[s.jsx("a",{className:"author",href:a,is:"router-link",children:i}),s.jsx("span",{className:"date",children:o})]}),t]})})}function b(e){var t=e.tagList;return s.jsx(s.Fragment,{children:t.length>0&&s.jsx(s.Fragment,{children:s.jsx("ul",{className:"tag-list",children:t.map(function(e){return s.jsx(s.Fragment,{children:s.jsx("li",{className:"tag-default tag-outline tag-pill",children:e})})})})})})}function y(e){var t=e.ondelete.bind(void 0,e.article),r="btn btn-sm btn-outline-danger";return e.className&&(r+=" "+e.className),s.jsx(s.Fragment,{children:s.jsxs("button",{className:r,onclick:t,type:"button",children:[s.jsx("i",{className:"ion-trash-a"})," Delete Article"]})})}function C(e){var t="btn btn-sm btn-outline-secondary";return e.className&&(t+=" "+e.className),s.jsx(s.Fragment,{children:s.jsxs("a",{className:t,href:"/editor/"+e.article.slug,is:"router-link",children:[s.jsx("i",{className:"ion-edit"})," Edit Article"]})})}function k(e){var t=e.profile,r=t.username,n=t.following,i=e.onfollow.bind(void 0,t),o="btn btn-sm btn"+(n?"-":"-outline-")+"secondary";return e.className&&(o+=" "+e.className),s.jsx(s.Fragment,{children:s.jsxs("button",{className:o,onclick:i,type:"button",children:[s.jsx("i",{className:"ion-plus-round"})," ",n?"Unfollow":"Follow"," ",r]})})}function F(e){var t=e.article,r=e.children,n=t.favorited,i=e.onlike.bind(void 0,t),o="btn btn-sm btn"+(n?"-":"-outline-")+"primary";return e.className&&(o+=" "+e.className),s.jsx(s.Fragment,{children:s.jsxs("button",{className:o,onclick:i,type:"button",children:[s.jsx("i",{className:"ion-heart"})," ",r]})})}function w(e){var t=e.count,r=e.limit,n=e.onoffset,i=Math.floor(e.offset/r)+1,o=Math.ceil(t/r);return s.jsx(s.Fragment,{children:s.jsx("nav",{children:s.jsx("ul",{className:"pagination",children:new Array(o).fill(null).map(function(e,t){return s.jsx(s.Fragment,{children:s.jsx("li",{className:"page-item "+(t+1===i?"active":""),children:s.jsx("a",{className:"page-link",href:"#",onclick:function(e){n(t*r),e.preventDefault()},children:t+1})})})})})})})}function _(e){var t=e.article,r=t.description,n=t.slug,i=t.tagList,o=t.title;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"article-preview",children:[s.jsx(N,{article:t,children:s.jsx(F,{article:t,className:"pull-xs-right",onlike:e.onlike,children:t.favoritesCount})}),s.jsxs("a",{className:"preview-link",href:"/article/"+n,is:"router-link",children:[s.jsx("h1",{children:o}),s.jsx("p",{children:r}),s.jsx("span",{children:"Read more..."}),s.jsx(b,{tagList:i})]})]})})}function S(e){var t=e.articles,r=e.articlesCount,n=e.limit,i=e.offset,o=e.onlike,a=e.onoffset;return r?s.jsxs(s.Fragment,{children:[t.map(function(e){return s.jsx(s.Fragment,{children:s.jsx(_,{article:e,onlike:o})})}),t.length<r&&s.jsx(s.Fragment,{children:s.jsx(w,{count:r,limit:n,offset:i,onoffset:a})})]}):s.jsx(s.Fragment,{children:s.jsx("div",{className:"article-preview",children:"No articles are here... yet."})})}function L(e){var t=e.errors;return s.jsx(s.Fragment,{children:t&&s.jsx(s.Fragment,{children:s.jsx("ul",{className:"error-messages",children:Object.keys(t).map(function(e){return t[e].map(function(t){return s.jsx(s.Fragment,{children:s.jsxs("li",{children:[e," ",t]})})})})})})})}e.ArticleComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t.router=void 0,t.userState=void 0,t.form=void 0,t.article=void 0,t.comments=void 0,t}v.default(t,e);var r=t.prototype;return r.removeArticle=function(){var e=this;d.Endpoint.removeArticle(this.article).subscribe(function(){e.router.navigate("/profile/"+e.userState.username).subscribe()})},r.removeComment=function(e){var t=this;d.Endpoint.removeComment(this.article,e).subscribe(function(){t.comments.splice(t.comments.indexOf(e),1),t.renderComponent()})},r.updateComment=function(){var e=this,t=new FormData(this.form);d.Endpoint.updateComment(this.article,{body:t.get("body").toString()}).subscribe(function(t){var r;e.comments.unshift(t),e.renderComponent(),null==(r=e.form)||r.reset()})},r.updateFollow=function(){var e,t=this;null!=(e=this.userState)&&e.token?d.Endpoint.updateFollow(this.article.author).subscribe(function(e){o.assign(t.article.author,e),t.renderComponent()}):this.router.navigate("/login").subscribe()},r.updateLike=function(){var e,t=this;null!=(e=this.userState)&&e.token?d.Endpoint.updateLike(this.article).subscribe(function(e){o.assign(t.article,e),t.renderComponent()}):this.router.navigate("/login").subscribe()},f.default(t,[{key:"template",get:function(){var e,t,r,n,i,o,l=this;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"article-page",children:[s.jsx("div",{className:"banner",children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{children:this.article.title}),s.jsx(N,{article:this.article,children:this.article.author.username===(null==(e=this.userState)?void 0:e.username)?s.jsxs(s.Fragment,{children:[s.jsx(C,{article:this.article})," ",s.jsx(y,{article:this.article,ondelete:function(){return l.removeArticle()}})]}):s.jsxs(s.Fragment,{children:[s.jsx(k,{profile:this.article.author,onfollow:function(){return l.updateFollow()}})," ",s.jsxs(F,{article:this.article,onlike:function(){return l.updateLike()},children:[this.article.favorited&&null!=(t=this.userState)&&t.token?"Unfavorite":"Favorite"," Article"," ",s.jsxs("span",{className:"counter",children:["(",this.article.favoritesCount,")"]})]})]})})]})}),s.jsxs("div",{className:"container page",children:[s.jsx("div",{className:"row article-content",children:s.jsxs("div",{className:"col-md-12",children:[s.jsx("div",{children:a.html(u.marked(this.article.body))}),s.jsx(b,{tagList:this.article.tagList})]})}),s.jsx("hr",{}),s.jsx("div",{className:"article-actions",children:s.jsx(N,{article:this.article,children:this.article.author.username===(null==(r=this.userState)?void 0:r.username)?s.jsxs(s.Fragment,{children:[s.jsx(C,{article:this.article})," ",s.jsx(y,{article:this.article,ondelete:function(){return l.removeArticle()}})]}):s.jsxs(s.Fragment,{children:[s.jsx(k,{profile:this.article.author,onfollow:function(){return l.updateFollow()}})," ",s.jsxs(F,{article:this.article,onlike:function(){return l.updateLike()},children:[this.article.favorited&&null!=(n=this.userState)&&n.token?"Unfavorite":"Favorite"," Article"," ",s.jsxs("span",{className:"counter",children:["(",this.article.favoritesCount,")"]})]})]})})}),s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-md-8 col-xs-12 offset-md-2",children:[null!=(i=this.userState)&&i.token?s.jsx(s.Fragment,{children:s.jsxs("form",{className:"card comment-form",children:[s.jsx("div",{className:"card-block",children:s.jsx("textarea",{className:"form-control",name:"body",placeholder:"Write a comment...",required:!0,rows:3})}),s.jsxs("div",{className:"card-footer",children:[s.jsx("img",{className:"comment-author-img",src:this.userState.image}),s.jsx("button",{className:"btn btn-sm btn-primary",disabled:!(null!=(o=this.form)&&o.checkValidity())||void 0,onclick:function(){return l.updateComment()},type:"button",children:"Post Comment"})]})]},"form")}):s.jsxs(s.Fragment,{children:[s.jsx("a",{href:"/login",is:"router-link",children:"Sign in"})," or"," ",s.jsx("a",{href:"/register",is:"router-link",children:"sign up"})," ","to add comments on this article."]}),this.comments.map(function(e){var t;return s.jsx(s.Fragment,{children:s.jsx(j,{comment:e,children:e.author.username===(null==(t=l.userState)?void 0:t.username)&&s.jsx(s.Fragment,{children:s.jsx("span",{className:"mod-options",children:s.jsx("i",{className:"ion-trash-a",onclick:function(){l.removeComment(e)}})})})})})})]})})]})]})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),i.__decorate([o.Factor(function(){return a.Router})],e.ArticleComponent.prototype,"router",void 0),i.__decorate([a.Fluctuate(function(){return new d.UserStore})],e.ArticleComponent.prototype,"userState",void 0),i.__decorate([a.Reference("form",["input"])],e.ArticleComponent.prototype,"form",void 0),i.__decorate([a.Resolve(function(e){return d.Endpoint.readArticle(e.params.slug)})],e.ArticleComponent.prototype,"article",void 0),i.__decorate([a.Resolve(function(e){return d.Endpoint.readComments(e.params.slug)})],e.ArticleComponent.prototype,"comments",void 0),e.ArticleComponent=i.__decorate([a.Route({path:"article/:slug"}),a.Component("article-component")],e.ArticleComponent),e.ErrorComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t.error=void 0,t}return v.default(t,e),t.prototype.connectedCallback=function(){this.error&&(console.error(this.error),this.renderComponent())},f.default(t,[{key:"template",get:function(){return s.jsx(s.Fragment,{children:s.jsx("div",{className:"home-page",children:s.jsx("div",{className:"banner",style:{background:"#b85c5c"},children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{className:"logo-font",children:"error"}),s.jsxs("p",{children:[s.jsx("strong",{children:this.error.name}),": ",this.error.message]})]})})})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),i.__decorate([a.Catch()],e.ErrorComponent.prototype,"error",void 0),e.ErrorComponent=i.__decorate([a.Route({path:"error"}),a.Component("error-component")],e.ErrorComponent),e.FooterComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t}return v.default(t,e),f.default(t,[{key:"template",get:function(){return s.jsx(s.Fragment,{children:s.jsx("footer",{children:s.jsxs("div",{className:"container",children:[s.jsx("a",{className:"logo-font",href:"/",is:"router-link",children:"conduit"}),s.jsxs("span",{className:"attribution",children:["© ",(new Date).getFullYear(),". An interactive learning project from"," ",s.jsx("a",{href:"https://thinkster.io",children:"Thinkster"}),". Code licensed under MIT."]})]})})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),e.FooterComponent=i.__decorate([a.Component("footer-component")],e.FooterComponent),e.HeaderComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t.router=void 0,t.routerState=void 0,t.userState=void 0,t}return v.default(t,e),t.prototype.navLink=function(){var e,t={className:"nav-link",href:"/"+[].slice.call(arguments).join("/"),is:"router-link"};return(null==(e=this.routerState)?void 0:e.path)===this.router.rebase(t.href,!1)&&(t.className+=" active"),t},f.default(t,[{key:"template",get:function(){var e;return s.jsx(s.Fragment,{children:s.jsx("nav",{className:"navbar navbar-light",children:s.jsxs("div",{className:"container",children:[s.jsx("a",{className:"navbar-brand",href:"/",is:"router-link",children:"conduit"}),s.jsxs("ul",{className:"nav navbar-nav pull-xs-right",children:[s.jsx("li",{className:"nav-item",children:s.jsx("a",g.default({},this.navLink(),{children:"Home"}))}),null!=(e=this.userState)&&e.token?s.jsxs(s.Fragment,{children:[s.jsx("li",{className:"nav-item",children:s.jsxs("a",g.default({},this.navLink("editor"),{children:[s.jsx("i",{className:"ion-compose"})," New Article"]}))}),s.jsx("li",{className:"nav-item",children:s.jsxs("a",g.default({},this.navLink("settings"),{children:[s.jsx("i",{className:"ion-gear-a"})," Settings"]}))}),s.jsx("li",{className:"nav-item",children:s.jsxs("a",g.default({},this.navLink("profile",this.userState.username),{children:[s.jsx("img",{className:"user-pic",src:this.userState.image}),this.userState.username]}))})]}):s.jsxs(s.Fragment,{children:[s.jsx("li",{className:"nav-item",children:s.jsx("a",g.default({},this.navLink("login"),{children:"Sign in"}))}),s.jsx("li",{className:"nav-item",children:s.jsx("a",g.default({},this.navLink("register"),{children:"Sign up"}))})]})]})]})})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),i.__decorate([o.Factor(function(){return a.Router})],e.HeaderComponent.prototype,"router",void 0),i.__decorate([a.Fluctuate(function(){return new a.Router})],e.HeaderComponent.prototype,"routerState",void 0),i.__decorate([a.Fluctuate(function(){return new d.UserStore})],e.HeaderComponent.prototype,"userState",void 0),e.HeaderComponent=i.__decorate([a.Component("header-component")],e.HeaderComponent),e.HomeComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t.router=void 0,t.userState=void 0,t.articles=void 0,t.tagList=void 0,t}v.default(t,e);var r=t.prototype;return r.navLink=function(e){var t=this,r={className:"nav-link",href:"#",onclick:function(r){t.readArticles(g.default({},e,{offset:0})),r.preventDefault()}};return Object.keys(e).every(function(r){var n;return e[r]===(null==(n=t.articles)?void 0:n[r])})&&(r.className+=" active"),r},r.navPill=function(e){var t=this,r={className:"tag-pill tag-default",href:"#",onclick:function(r){t.readArticles({offset:0,path:void 0,tag:e}),r.preventDefault()}};return e===this.articles.tag&&(r.className+=" active"),r},r.readArticles=function(e){var t=this,r=this.articles;d.Endpoint.readArticles(g.default({offset:r.offset,path:r.path,tag:r.tag},e)).subscribe(function(e){t.articles=e,t.renderComponent()})},r.updateLike=function(e){var t,r=this;null!=(t=this.userState)&&t.token?d.Endpoint.updateLike(e).subscribe(function(t){var n=r.articles.articles.indexOf(e);r.articles.articles.splice(n,1,t),r.renderComponent()}):this.router.navigate("/login").subscribe()},f.default(t,[{key:"template",get:function(){var e,t=this;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"home-page",children:[s.jsx("div",{className:"banner",children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{className:"logo-font",children:"conduit"}),s.jsxs("p",{children:["A place to share your ",s.jsx("i",{children:"SGRUD"})," knowledge."]})]})}),s.jsx("div",{className:"container page",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-9",children:[s.jsx("div",{className:"feed-toggle",children:s.jsxs("ul",{className:"nav nav-pills outline-active",children:[(null==(e=this.userState)?void 0:e.token)&&s.jsx(s.Fragment,{children:s.jsx("li",{className:"nav-item",children:s.jsx("a",g.default({},this.navLink({path:"feed",tag:void 0}),{children:"Your Feed"}))})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",g.default({},this.navLink({path:void 0,tag:void 0}),{children:"Global Feed"}))}),this.articles.tag&&s.jsx(s.Fragment,{children:s.jsx("li",{className:"nav-item",children:s.jsxs("a",g.default({},this.navLink({path:void 0,tag:this.articles.tag}),{children:[s.jsx("i",{className:"ion-pound"})," ",this.articles.tag]}))})})]})}),s.jsx(S,g.default({},this.articles,{onlike:function(e){return t.updateLike(e)},onoffset:function(e){return t.readArticles({offset:e})}}))]}),s.jsx("div",{className:"col-md-3",children:s.jsxs("div",{className:"sidebar",children:[s.jsx("p",{children:"Popular Tags"}),s.jsx(s.Fragment,this.tagList.length>0?{children:s.jsx("div",{className:"tag-list",children:this.tagList.map(function(e){return s.jsx(s.Fragment,{children:s.jsx("a",g.default({},t.navPill(e),{children:e}))})})})}:{children:s.jsx("div",{children:"No tags are here... yet."})})]})})]})})]})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),i.__decorate([o.Factor(function(){return a.Router})],e.HomeComponent.prototype,"router",void 0),i.__decorate([a.Fluctuate(function(){return new d.UserStore})],e.HomeComponent.prototype,"userState",void 0),i.__decorate([a.Resolve(function(){return d.Endpoint.readArticles()})],e.HomeComponent.prototype,"articles",void 0),i.__decorate([a.Resolve(function(){return d.Endpoint.readTags()})],e.HomeComponent.prototype,"tagList",void 0),e.HomeComponent=i.__decorate([a.Route({path:""}),a.Component("home-component")],e.HomeComponent),e.LoginComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t.router=void 0,t.store=void 0,t.form=void 0,t.errors=void 0,t}return v.default(t,e),t.prototype.dispatchLogin=function(){var e=this,t=new FormData(this.form);this.errors&&(this.errors=void 0,this.renderComponent()),this.store.dispatch("login",[t.get("email").toString(),t.get("password").toString()]).subscribe({error:function(t){e.errors=t.errors,e.renderComponent()},next:function(t){return e.router.navigate("/profile/"+t.username).subscribe()}})},f.default(t,[{key:"template",get:function(){var e,t=this;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"auth-page",children:s.jsx("div",{className:"container page",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-md-6 col-xs-12 offset-md-3",children:[s.jsx("h1",{className:"text-xs-center",children:"Sign in"}),s.jsx("p",{className:"text-xs-center",children:s.jsx("a",{href:"/register",is:"router-link",children:"Need an account?"})}),s.jsx(L,{errors:this.errors}),s.jsxs("form",{children:[s.jsx("fieldset",{className:"form-group",children:s.jsx("input",{className:"form-control form-control-lg",name:"email",pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",placeholder:"Email",required:!0,type:"email"})}),s.jsx("fieldset",{className:"form-group",children:s.jsx("input",{className:"form-control form-control-lg",name:"password",pattern:"^.{8,}$",placeholder:"Password",required:!0,type:"password"})}),s.jsx("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:!(null!=(e=this.form)&&e.checkValidity())||void 0,onclick:function(){return t.dispatchLogin()},type:"button",children:"Sign in"})]},"form")]})})})})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),i.__decorate([o.Factor(function(){return a.Router})],e.LoginComponent.prototype,"router",void 0),i.__decorate([o.Factor(function(){return d.UserStore})],e.LoginComponent.prototype,"store",void 0),i.__decorate([a.Reference("form",["input"])],e.LoginComponent.prototype,"form",void 0),e.LoginComponent=i.__decorate([a.Route({path:"login"}),a.Component("login-component")],e.LoginComponent),e.ProfileComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t.router=void 0,t.routerState=void 0,t.userState=void 0,t.articles=void 0,t.profile=void 0,t}v.default(t,e);var r=t.prototype;return r.navLink=function(){var e,t={className:"nav-link",href:"/profile/"+[this.profile.username].concat([].slice.call(arguments)).join("/"),is:"router-link"};return(null==(e=this.routerState)?void 0:e.path)===this.router.rebase(t.href,!1)&&(t.className+=" active"),t},r.readArticles=function(e){var t=this,r=this.articles;d.Endpoint.readArticles(g.default({author:r.author,favorited:r.favorited,offset:r.offset},e)).subscribe(function(e){t.articles=e,t.renderComponent()})},r.updateFollow=function(){var e,t=this;null!=(e=this.userState)&&e.token?d.Endpoint.updateFollow(this.profile).subscribe(function(e){o.assign(t.profile,e),t.renderComponent()}):this.router.navigate("/login").subscribe()},r.updateLike=function(e){var t,r=this;null!=(t=this.userState)&&t.token?d.Endpoint.updateLike(e).subscribe(function(t){var n=r.articles.articles.indexOf(e);r.articles.articles.splice(n,1,t),r.renderComponent()}):this.router.navigate("/login").subscribe()},f.default(t,[{key:"template",get:function(){var e,t=this;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"profile-page",children:[s.jsx("div",{className:"user-info",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-md-10 col-xs-12 offset-md-1",children:[s.jsx("img",{className:"user-img",src:this.profile.image}),s.jsx("h4",{children:this.profile.username}),s.jsx("p",{children:this.profile.bio}),this.profile.username===(null==(e=this.userState)?void 0:e.username)?s.jsx(s.Fragment,{children:s.jsxs("a",{className:"btn btn-sm btn-outline-secondary action-btn",href:"/settings",is:"router-link",children:[s.jsx("i",{className:"ion-gear-a"})," Edit Profile Settings"]})}):s.jsx(s.Fragment,{children:s.jsx(k,{className:"action-btn",onfollow:function(){return t.updateFollow()},profile:this.profile})})]})})})}),s.jsx("div",{className:"container",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-md-10 col-xs-12 offset-md-1",children:[s.jsx("div",{className:"articles-toggle",children:s.jsxs("ul",{className:"nav nav-pills outline-active",children:[s.jsx("li",{className:"nav-item",children:s.jsx("a",g.default({},this.navLink(),{children:"My Articles"}))}),s.jsx("li",{className:"nav-item",children:s.jsx("a",g.default({},this.navLink("favorites"),{children:"Favorited Articles"}))})]})}),s.jsx(S,g.default({},this.articles,{onlike:function(e){return t.updateLike(e)},onoffset:function(e){return t.readArticles({offset:e})}}))]})})})]})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),i.__decorate([o.Factor(function(){return a.Router})],e.ProfileComponent.prototype,"router",void 0),i.__decorate([a.Fluctuate(function(){return new a.Router})],e.ProfileComponent.prototype,"routerState",void 0),i.__decorate([a.Fluctuate(function(){return new d.UserStore})],e.ProfileComponent.prototype,"userState",void 0),i.__decorate([a.Resolve(function(e){var t,r=e.params;return d.Endpoint.readArticles(((t={})[r.favorites?"favorited":"author"]=r.username,t))})],e.ProfileComponent.prototype,"articles",void 0),i.__decorate([a.Resolve(function(e){var t=e.params;return c.from(new d.UserStore).pipe(c.first(),c.switchMap(function(e){return t.username!==e.username?d.Endpoint.readProfile(t.username):c.of(e)}))})],e.ProfileComponent.prototype,"profile",void 0),e.ProfileComponent=i.__decorate([a.Route({path:"profile/:username/:favorites?"}),a.Component("profile-component")],e.ProfileComponent),e.RegisterComponent=/*#__PURE__*/function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).styles=['@import url("/realworld/style.css");'],t.router=void 0,t.store=void 0,t.form=void 0,t.errors=void 0,t}return v.default(t,e),t.prototype.dispatchRegister=function(){var e=this,t=new FormData(this.form);this.errors&&(this.errors=void 0,this.renderComponent()),this.store.dispatch("register",[t.get("email").toString(),t.get("username").toString(),t.get("password").toString()]).subscribe({error:function(t){e.errors=t.errors,e.renderComponent()},next:function(t){return e.router.navigate("/profile/"+t.username).subscribe()}})},f.default(t,[{key:"template",get:function(){var e,t=this;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"auth-page",children:s.jsx("div",{className:"container page",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"col-md-6 col-xs-12 offset-md-3",children:[s.jsx("h1",{className:"text-xs-center",children:"Sign up"}),s.jsx("p",{className:"text-xs-center",children:s.jsx("a",{href:"/login",is:"router-link",children:"Have an account?"})}),s.jsx(L,{errors:this.errors}),s.jsxs("form",{children:[s.jsx("fieldset",{className:"form-group",children:s.jsx("input",{className:"form-control form-control-lg",name:"username",placeholder:"Your Name",required:!0,type:"text"})}),s.jsx("fieldset",{className:"form-group",children:s.jsx("input",{className:"form-control form-control-lg",name:"email",pattern:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",placeholder:"Email",required:!0,type:"text"})}),s.jsx("fieldset",{className:"form-group",children:s.jsx("input",{className:"form-control form-control-lg",name:"password",pattern:"^.{8,}$",placeholder:"Password",required:!0,type:"password"})}),s.jsx("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:!(null!=(e=this.form)&&e.checkValidity())||void 0,onclick:function(){return t.dispatchRegister()},type:"button",children:"Sign up"})]},"form")]})})})})})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),i.__decorate([o.Factor(function(){return a.Router})],e.RegisterComponent.prototype,"router",void 0),i.__decorate([o.Factor(function(){return d.UserStore})],e.RegisterComponent.prototype,"store",void 0),i.__decorate([a.Reference("form",["input"])],e.RegisterComponent.prototype,"form",void 0),e.RegisterComponent=i.__decorate([a.Route({path:"register"}),a.Component("register-component")],e.RegisterComponent),e.AppComponent=(p=/*#__PURE__*/function(e){function t(){var t;return(t=e.call(this)||this).styles=['@import url("/realworld/style.css");'],t.fadeQueue=void 0,t.router=void 0,t.userStore=void 0,t.main=void 0,c.from(t.userStore).pipe(c.first(function(e){return!!e.username}),c.switchMap(function(){return(new o.Kernel).require("/realworld/lazy")})).subscribe(),c.from(t.userStore).pipe(c.filter(function(){return!document.hasFocus()}),c.skipWhile(function(e){return!e.username}),c.map(function(e){var t=e.username;return t?"/profile/"+t:"/login"}),c.switchMap(function(e){return t.router.navigate(e,void 0,"replace")})).subscribe(),t}return v.default(t,e),t.prototype.connectedCallback=function(){var e=this;c.from(l.StateHandler).subscribe(function(){e.renderComponent(),e.fadeQueue.element=e.main})},f.default(t,[{key:"template",get:function(){return s.jsxs(s.Fragment,{children:[s.jsx("slot",{name:"header"}),s.jsx("main",{children:s.jsx("slot",{})},"main"),s.jsx("slot",{name:"footer"})]})}}]),t}(/*#__PURE__*/x.default(HTMLElement)),new l.StateHandler("/realworld/."),p),i.__decorate([o.Factor(function(){return d.FadeQueue})],e.AppComponent.prototype,"fadeQueue",void 0),i.__decorate([o.Factor(function(){return a.Router})],e.AppComponent.prototype,"router",void 0),i.__decorate([o.Factor(function(){return d.UserStore})],e.AppComponent.prototype,"userStore",void 0),i.__decorate([a.Reference("main")],e.AppComponent.prototype,"main",void 0),e.AppComponent=i.__decorate([a.Route({path:"",children:[e.ArticleComponent,e.ErrorComponent,e.HomeComponent,e.LoginComponent,e.ProfileComponent,e.RegisterComponent],slots:{header:e.HeaderComponent,footer:e.FooterComponent}}),a.Component("app-component")],e.AppComponent),e.ArticleComment=j,e.ArticleList=S,e.ArticleMeta=N,e.ArticlePager=w,e.ArticlePreview=_,e.ArticleTags=b,e.DeleteButton=y,e.EditButton=C,e.ErrorMessages=L,e.FollowButton=k,e.LikeButton=F});
//# sourceMappingURL=index.umd.js.map
